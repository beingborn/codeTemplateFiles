<!DOCTYPE html>
<html lang="ko">
<head>
  <title>이민혁 코드 스타일 정리</title>
  <meta charset="utf-8">
  <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="guide.css">
</head>
<body>
  <div class="cont">
    <h2>Guide v01</h2>
    <span>20241226</span>
    <!-- 컬러 -->
    <div class="color-info">
      
    </div>
    <!-- 툴팁 -->
    <div class="flex-item-right">
      <form class="file_lst_search">
        <fieldset>
          <legend>
            검색
            <a href="#" class="file_tooltip">
              ?
              <div class="file_tooltip_box">
                <p><strong>필터 버튼이 활성화된 상태</strong>에서 인풋에 값을 넣으면 해당 검색어를 포함한 행을 <strong>실시간으로 필터링</strong>합니다.</p>
                <br>
                <p><strong>검색모드 버튼이 활성화된 상태</strong>에선 인풋에 <strong>값을 넣고 검색 버튼을 클릭해야만</strong> 데이터가 필터링됩니다.</p>
              </div>
            </a>
          </legend>
          <input type="text" id="search" placeholder="검색어를 입력해주세요.">
          <button class="search-btn" id="search-confirm">검색</button>
          <button class="btn-function" id="fastModeBtn">필터</button>
          <button class="btn-function" id="slowModeBtn">검색모드</button>
        </fieldset>
      </form>
    </div>

    <span class="count-info">
      <span class="page">페이지 : <span></span></span>
      <span>/</span>
      <span class="popup">팝업 : <span></span></span>
    </span>
    <table class="file_lst">
      <colgroup>
        <col width="15%" />
        <col width="15%" />
        <col width="10%" />
        <col width="15%" />
        <col width="10%" />
        <col width="25%" />
      </colgroup>
      <thead>
        <tr>
          <th>1Depth</th>
          <th>2Depth</th>
          <th>형식</th>
          <th>URL</th>
          <th>완료여부</th>
          <th>수정내역</th>
        </tr>
      </thead>
      <tbody>
        <tr class="line done l">
          <th>평생교육이용권</th>
          <td>이용권 지자체_마이페이지_개인정보 수정</td>
          <td>page</td>
          <td><a href="./LIP_001.html">LIP_001.html</a></td>
          <td class="ac">O</td>
          <td>12.11 : 시연용 대체 이미지 퍼블리싱</td>
        </tr>
      </tbody>
    </table>
  </div>
  <script>
    $(function() {
      $(".main-tab .tab").each(function(i) {
        $(this).on("click", function() {
          $(".main-tab .tab").removeClass("act");
          $(this).addClass("act");
          $(".main-con").hide();
          $(".main-con").eq(i).show();
        });
      });
      $(".main-tab .tab").eq(0).trigger("click");
      $(".tab-area .tab").each(function(i) {
        $(this).on("click", function() {
          $(".tab-area .tab").removeClass("act");
          $(this).addClass("act");
          $(".tab-con").hide();
          $(".tab-con").eq(i).show();
        });
      });
      $(".tab-area2 .tab").each(function(i) {
        $(this).on("click", function() {
          $(".tab-area2 .tab").removeClass("act");
          $(this).addClass("act");
          $(".tab-con2").hide();
          $(".tab-con2").eq(i).show();
        });
      });
      $(".tab-area .tab").eq(0).trigger("click");
      $(".tab-area2 .tab").eq(0).trigger("click");
      var pageNum = 0;
      var popupNum = 0;
      $(".file_lst tbody tr").each(function() {
        var text = $(this).find('td').eq(1).text();
        if (text.indexOf('page') >= 0) {
          pageNum++;
        }
        if (text.indexOf('popup') >= 0) {
          popupNum++;
        }
      });
      $('.count-info .page span').text(pageNum);
      $('.count-info .popup span').text(popupNum);
    });
    /* 검색 전환 */
    $('.file_lst_search .btn-function').eq(0).addClass('is-active')
    $('.file_lst_search .btn-function').click(function () {
      $('.file_lst_search .btn-function').not($(this)).removeClass('is-active')
      $(this).addClass('is-active');
    })
    let searchMode = "fastmode"; // 기본값을 패스트 모드로 설정
    const fastModeBtn = document.querySelector('#fastModeBtn')
    const slowModeBtn = document.querySelector('#slowModeBtn')
    fastModeBtn.addEventListener('click',function(event){
      event.preventDefault();
      searchMode = "fastmode";
      searchBtn.disabled = true;
    })
    slowModeBtn.addEventListener('click',function(event){
      event.preventDefault();
      searchMode = "slowmode"
      searchBtn.disabled = false;
    })
    let filterValue;
    let searchTbody;
    let rows;
    document.addEventListener('DOMContentLoaded', function(){
      if (searchMode = "fastmode"){
        searchBtn.disabled = true;
      } else {
        searchBtn.disabled = false;
      }
      const searchInput = document.querySelector('#search')
      searchTbody = document.querySelector('.file_lst tbody');
      searchInput.addEventListener('keyup', function(){
        filterValue = searchInput.value;
        if (searchMode == "fastmode"){
          // 해당 요소의 tr들 모두 배열로 넣기
          rows = searchTbody.querySelectorAll('tr');
          for (var i = 0; i < rows.length; i++){
            var rowText = rows[i].textContent;
            if(rowText.includes(filterValue)){
              rows[i].style.display = '';
            } else {
              rows[i].style.display = 'none'
            }
          }
        } 
      })
    })
    // 검색 버튼 기능
    const searchBtn = document.querySelector('#search-confirm')
    searchBtn.addEventListener('click',function(event){
      event.preventDefault();
      const pageNameRows = searchTbody.querySelectorAll('tr');
      let matched = false;
      for (var i = 0; i < pageNameRows.length; i++){
        var pageNumText = pageNameRows[i].textContent;
        // 각각의 tr의 text컨텐츠의 filterValue가 포함되어있다면, tr의 display값을 'block'
        if(pageNumText.includes(filterValue)){
          pageNameRows[i].style.display = '';
          matched = true;
        } else {
          pageNameRows[i].style.display = 'none';
        }
      } 
      // 검색어가 없을 경우
      if (matched === false) {
          const noDataTr = document.createElement('tr')
          const noDataTd = document.createElement('td')
          noDataTd.textContent = "조회된 데이터가 없습니다."
          noDataTd.setAttribute('colspan', '6')
          noDataTd.setAttribute('style', 'text-align: center;')
          noDataTr.appendChild(noDataTd);
          searchTbody.appendChild(noDataTr)
          return false;
      }
    })
  </script>
</body>

</html>